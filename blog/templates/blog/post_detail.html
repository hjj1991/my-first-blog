{% extends 'blog/base.html' %}

{% block content %}
<div class="container"> 
    <h1 style="color:black">제목: {{post.title}} </h1>
    <p>글쓴이: {{post.author}} </p>
    <p>날짜: {{post.created_date}}</p>
    <p>{{post.content |safe}}</p>
{% for comment in post.comments.all %}
    <div class="comment">
        <div class="date">{{ comment.created_date }} 
        {% if comment.author == user.username %}
            <form method="POST" class="post-form" action="{% url 'comment_remove' post_id=post.pk %}">
                {% csrf_token %}
                <input type="hidden" name="del_comment_indx" value="{{ comment.pk }}">
                <button type="submit" class="save btn btn-default">Delete</button>
            </form>
        {% endif %}
        </div>
        <strong> {{comment.author}} </strong>
        <p> {{comment.text|linebreaks}} </p>
    </div>
{% empty %}
    <p> 댓글이 없습니다.</p>

{% endfor %}
{% if user.is_authenticated %}
    <form method="POST" class="post-form" action="{% url 'add_comment_to_post' post_id=post.pk %}">
        {% csrf_token %}
        <input type="hidden" name="author" value="{{ user.username }}">
        <input name="text" type="textarea" value="">   
        <button type="submit" class="save btn btn-default">Send</button>
    </form>
{% endif %}
</div>
{% endblock %}